次回以降claudeでのルール整備の際に以下の、クロードの標準ディレクトリ構成を踏まえて最適なルール整備が実施できるように、これ自体をルール化しておく。



## Claude ディレクトリ構成の全体像

Claude はユーザーの環境設定やプロジェクトごとのコンテキストを管理するために、次の2階層で設定ファイルを扱います。

- **グローバル設定**：`~/.claude/`  
- **プロジェクト個別設定**：`./.claude/`

両者は **階層的に連携** しており、プロジェクト側で上書きした設定が優先されます。

***

### 1. ホームディレクトリ（~/.claude/）

システム全体に共通する設定・履歴・カスタム定義を保存する領域です。  
初期セットアップ時に自動作成されます。

#### 主な構成

- **projects/**  
  各プロジェクトの対話ログ（JSONL形式）が格納されます。ファイル名＝プロジェクトID。

- **commands/**  
  どこからでも呼び出せるカスタムコマンド（スラッシュコマンド）を配置。  
  例：`/deploy` → 部署ワークフロー呼び出し。

- **file-history/**  
  以前に編集したファイルのチェックポイントやバックアップを自動保存します。差分比較にも使用。

- **agents/**  
  特定タスク用にカスタム構成された「サブエージェント」の定義。  
  例：`review-agent.json` → コードレビュー専用Claudeエージェント。

- **skills/**  
  再利用可能な個別スキル（文章要約、翻訳、スタイル変換など）の定義。

- **.credentials.json**  
  APIキーやトークンなど認証情報を格納。**Git管理から除外**することが推奨されます。

- **~/.claude.json**  
  Claude全体のテーマ設定、MCPサーバー接続、許可済みツールリストなどを保持する**グローバル設定ファイル**です。  
  主な項目例：
  ```json
  {
    "theme": "dark",
    "mcp_server": "http://localhost:8080",
    "allowed_tools": ["git", "vscode"]
  }
  ```

***

### 2. プロジェクトディレクトリ（./.claude/）

各プロジェクト特有のルール・コンテキスト・ワークフローをまとめて管理。  
リポジトリルートに配置し、Claudeが自動的に検出します。

#### 主な構成

- **rules/**  
  プロジェクトの開発規約・命名規則・レビュー基準などを分割して管理。  
  Claudeは起動時にこのディレクトリ内の `.md` ファイル（例：`rules/coding-style.md`）を自動読み込みします。

- **prompts/**  
  プロジェクト専用の定型プロンプトを格納。チーム全体で統一的な会話スタイルを共有するために利用されます。

- **workflows/**  
  プロジェクト特有の作業フローを定義。YAMLやJSON形式で記述。  
  例：
  ```yaml
  name: release-check
  steps:
    - run_tests
    - generate_changelog
    - create_tag
  ```

***

### 3. 重要な関連ファイル

- **CLAUDE.md**  
  プロジェクトの「メイン設定ファイル」。概要、目的、ルール、エージェント構成をまとめます。  

  **構成例：**
  ```
  # CLAUDE.md
  ## プロジェクト概要
  - AIチーム支援用システム開発
  
  ## コーディング規約
  - rules/coding-style.md を参照

  ## 使用スキル
  - summarize
  - translate
  
  ## 対話スタイル設定
  - 丁寧だが簡潔な日本語
  ```

- **設定の優先順位ルール**
  1. プロジェクトローカル (`./.claude/`)
  2. グローバル (`~/.claude/`)
  3. デフォルト設定（Claude内部）

***

### 4. 運用上のポイント

- **セキュリティ管理**
  `.credentials.json` はAPIキーなどを含むため `.gitignore` に登録推奨。
- **チーム利用**
  `/prompts` や `/workflows` はチーム共有リポジトリに含めると統一的な動作を実現。
- **バックアップ**
  `file-history/` は自動生成されるため、誤って削除しないよう注意。

***

この構成を保持しておくと、開発・会話・コマンド呼び出しをすべて統合的に扱えるようになります。  

***

プロジェクト用途（例：研究チーム開発、Webアプリ開発など）に合わせたテンプレート構成例も出せますが、作成しますか？
