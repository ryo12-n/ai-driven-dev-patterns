# 改善施策提案: openspec-code-trial

## 背景・課題

openspec の変更サイクル（new → continue → apply → verify → archive）は整備済みであり、
README 更新などドキュメント系の change は1サイクル完了実績がある。

しかし、**実際のアプリケーションコードを生成する change は未実施**であり、以下の課題がある：

- openspec の `apply` フェーズが実コード生成でどの程度有効に機能するか未検証
- `src/` は `.gitkeep` のみの状態で、コード生成のエンドツーエンド実績がない
- openspec の specs（RFC 2119 形式の要件定義）がコード実装の品質・正確性にどう寄与するかが不明
- ISS-006「ロール定義と OpenSpec 開発ライフサイクルの統合が未定義」が未解決のまま残っている

## 目標

1. openspec の変更サイクルを使って Go のサンプルアプリケーションを `src/` に実装する
2. 1サイクル完遂し、実コード生成における openspec の有効性・課題を検証する
3. 得られた知見を今後の openspec 活用方針に反映できる形でまとめる

## スコープ

### やること

- openspec の change を1つ作成し、proposal → specs → design → tasks → apply → verify → archive を完遂する
- Go で小規模なサンプルアプリケーション（CLI ツール程度）を `src/` に実装する
- apply フェーズでの実コード生成プロセスの有効性を検証する
- 知見・課題を施策成果物として記録する

### やらないこと

- 複数の change サイクル実施（1サイクルのみ）
- プロダクションレベルのアプリケーション開発（検証目的のサンプル）
- ロール定義と openspec の統合設計（ISS-006 の解決自体は別施策。知見収集のみ）
- openspec skills やコマンド自体の改修
- CI/CD パイプラインへの組み込み

## 期待される効果

- openspec の実コード生成における実用性の定量的な評価が得られる
- apply フェーズの改善点が具体的に判明する
- specs の RFC 2119 形式がコード実装の指針としてどの程度機能するかの実績データが得られる
- ISS-006 解決に向けた具体的な知見が蓄積される

## リスク

| リスク | 影響度 | 対策 |
|--------|--------|------|
| サンプルアプリのテーマ選定が不適切で検証が浅くなる | 中 | specs → コード変換の検証に適した粒度（2-5個の要件）に限定する |
| Go の開発環境が未整備でビルド・テストに支障が出る | 中 | 最初のタスクで Go 環境確認を行い、問題があれば早期に報告する |
| openspec の apply が期待通り動作しない | 中 | 手動で apply 相当の作業を実施し、スキルの改善点として記録する |
| 1サイクルでは十分な知見が得られない | 低 | 検証観点を事前に明確化し、各フェーズで定量的な記録を残す |

## 壁打ちの背景

壁打ちフェーズで以下の意思決定を行った：

- **実装対象**: サンプルアプリケーション（`src/` に配置）を選択。本リポジトリ自体がパターン集・テンプレートであり実コードがないため、検証目的で新規作成する方針とした
- **技術スタック**: Go を選択。ユーザーの希望による
- **規模**: 最小限（1チェンジサイクル）。プロセス検証が主目的であり、まず1サイクル完遂してから次の展開を判断する
- **ブランチ**: `claude/openspec-code-trial-5xM1y` で作業する（セッション管理ブランチを兼用）

## 備考・設計パターン

本施策では openspec の変更サイクル自体を L2-worker のタスクとして実行する。
具体的には、L2-worker が `/opsx:new` → `/opsx:continue`（または `/opsx:ff`）→ `/opsx:apply` → `/opsx:verify` のコマンドを順に実行してサイクルを回す。

openspec 側の config.yaml のルール（proposal は日本語、design に mermaid 図必須、tasks はチェックボックス形式）に従う。

---
**起票者**: L1
**起票日**: 2026-02-28
**ステータス**: 実施中
