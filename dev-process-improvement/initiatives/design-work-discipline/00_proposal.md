# 改善施策提案: セッション横断の作業規律設計

## 背景・課題

施策「シナリオ別セッション運用フロー設計」で5シナリオのセッション運用フローを設計したが、**セッション横断の作業規律**（壁打ち・実施計画・作業ログ・作業レポート・課題起票）が実行層に未導入。

| レイヤー | 作業規律 | 問題 |
|---------|---------|------|
| 戦略層（施策管理） | 完全（ファイル群による管理、マネージャー/ワーカー分担） | なし |
| 実行層（5シナリオの開発セッション） | **なし**（git commit のみ） | コンテキスト切れ時の復旧困難、セッション間のトレーサビリティ不在 |

## 目標

1. 全セッションに一律の作業規律（壁打ち・計画・ログ・レポート・課題）を導入する
2. `sessions/<session-name>/` ディレクトリに4ファイル（plan.md / log.md / report.md / issues.md）を配置する標準を確立する
3. session-flow-advanced.md §11.1（状態永続化）にセッション作業規律を組み込む

## スコープ

### やること

- セッションディレクトリのテンプレート設計（4ファイル構成）
- sessions/ から openspec/ 成果物への参照方式の設計
- session-flow-advanced.md §11.1 への追記
- sessions/_template/ ディレクトリの作成（リポジトリルート直下）
- 既存 §11.1 内容との整合性検証

### やらないこと

- 5シナリオの個別セッションフローの変更（§5-§9 は触らない）
- openspec/ ディレクトリの構造変更
- ディスパッチャー（§4）の設計変更
- sessions/ の実際の運用開始（テンプレート作成まで）

## 期待される効果

- 全セッションに一律の作業規律が適用され、品質トレーサビリティが向上
- 判定ロジック不要でディスパッチャーがシンプルに保たれる
- コンテキスト切れ時のセッション復旧が容易になる（壁打ち・計画・ログが残る）
- openspec/ と sessions/ の責務が明確に分離され、それぞれの構造が単純になる

## リスク

| リスク | 影響度 | 対策 |
|--------|--------|------|
| §11.1 への追記が既存設計と矛盾する | 中 | 追記後に §11.1.1〜§11.1.3 との整合性を検証するタスクを設ける |
| テンプレートが重すぎてセッション開始のオーバーヘッドになる | 低 | 必須セクションを最小限にし、軽量さを重視する |

## 壁打ちの背景

壁打ちフェーズで以下の意思決定を行った。

1. **sessions/ の配置場所**: リポジトリルート直下に統一配置することを決定。プロジェクトごとの柔軟配置は複雑さが増すため不採用
2. **§11 への追記形式**: 独立セクション（§11.4）ではなく §11.1（状態永続化）に組み込むことを決定。セッション作業規律は状態永続化の具体的な実装方式であるため
3. **成果物の範囲**: 設計書（§11.1 追記）に加えてテンプレートファイル（sessions/_template/）も本施策で作成することを決定
4. **関心事の分離**: 成果物の中で戦略層の作業規律には言及しない。両者は独立した関心事として扱う

## 備考・設計パターン

### 依存関係

| 施策 | 関係 | 理由 |
|------|------|------|
| **セッション運用フロー設計書の分割** | 分割が先（完了済み ✅） | §11 への追記は分割後の session-flow-advanced.md に対して行うため |
| コード開発ワークフロー・ロール定義の実装（ISS-023） | 本施策が先が望ましい | ロール定義にセッション規律（sessions/ ディレクトリ）を組み込む際に連携 |

### 参考情報

- **前提施策**: シナリオ別セッション運用フロー設計（完了）→ `docs/design/session-operation-flow.md`
- **追記先**: `docs/design/session-flow-advanced.md` §11.1（状態永続化）

### 想定ディレクトリ構成

```
sessions/<session-name>/
├── plan.md         # 壁打ち（必須セクション）+ 実施計画
├── log.md          # 作業ログ（openspec 成果物への参照を含む）
├── report.md       # 完了レポート
└── issues.md       # 課題バッファ
```

---
**起票者**: L1
**起票日**: 2026-03-02
**ステータス**: 実施中
