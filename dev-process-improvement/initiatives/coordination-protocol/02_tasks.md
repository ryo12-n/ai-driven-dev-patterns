# タスクリスト: 協調プロトコル整備（commit/lock/test）

## 凡例

- ステータス: ⬜ 未着手 / 🔄 進行中 / ✅ 完了 / ⛔ ブロック
- 優先度: 🔴 高 / 🟡 中 / 🔵 低

---

## フェーズ1 タスク（L2-worker 担当）

### T-001: 参考 PoC のプロトコル設計分析

| 項目 | 内容 |
|------|------|
| **やること** | `refs/ai-driven-development-poc/` の `lock_protocol.md`・`commit_protocol.md`・`test_protocol.md` および関連ドキュメントを分析し、各プロトコルの設計思想・メリット・制約を整理する |
| **分析観点** | ① 各プロトコルの目的と適用範囲 ② テキストファイルベースのロック方式の長所・短所 ③ コミットメッセージ規約とブランチ戦略 ④ 2段階テスト（fast/full）の仕組み ⑤ 本リポジトリの運用にそのまま適用できる部分と要カスタマイズ部分 |
| **成果物** | `03_work_log.md` に分析結果を記録 |
| **完了条件** | 上記分析観点①〜⑤について整理され、カスタマイズ要否の判断が付いている |
| **優先度** | 🔴 |
| **ステータス** | ✅ |

---

### T-002: git worktree ガイドラインとの接続点確認

| 項目 | 内容 |
|------|------|
| **やること** | `docs/git-worktree-guideline.md`（git worktree 施策の成果物）を読み、協調プロトコル設計への影響を確認する |
| **確認観点** | ① worktree 利用時に commit/lock/test プロトコルがどう変わるか ② worktree と非worktree の併用ケースでの注意点 ③ ガイドラインで「協調プロトコル施策との接続点」として挙げられている項目 |
| **成果物** | `03_work_log.md` に確認結果を記録 |
| **完了条件** | worktree ガイドラインとの接続点が一覧化され、プロトコル設計への反映方針が決まっている |
| **優先度** | 🔴 |
| **ステータス** | ✅ |

---

### T-003: commit プロトコルの設計

| 項目 | 内容 |
|------|------|
| **やること** | エージェント間の commit に関するプロトコルを設計する |
| **設計項目** | ① コミットタイミング（タスク完了時 / ファイル単位 / 一括など） ② コミットメッセージ規約（エージェント識別子の付与方法） ③ ブランチ戦略（共有ブランチ / エージェント個別ブランチ） ④ コンフリクト発生時の解消手順 ⑤ worktree 利用時と非利用時の差異 |
| **成果物** | `03_work_log.md` に設計結果を記録 |
| **完了条件** | 上記設計項目①〜⑤が定義されている |
| **優先度** | 🔴 |
| **ステータス** | ✅ |

---

### T-004: lock プロトコルの設計

| 項目 | 内容 |
|------|------|
| **やること** | エージェント間のリソース排他制御に関するプロトコルを設計する |
| **設計項目** | ① 排他制御の対象（ファイル / ディレクトリ / 論理リソース） ② ロック方式（テキストファイル / ブランチ / worktree による暗黙的分離） ③ ロックの粒度とデッドロック回避策 ④ ロック取得失敗時の振る舞い（待機 / スキップ / 代替タスク着手） ⑤ 現在の L1/L2 ファイル所有権ルールとの関係 |
| **成果物** | `03_work_log.md` に設計結果を記録 |
| **完了条件** | 上記設計項目①〜⑤が定義されている |
| **優先度** | 🟡 |
| **ステータス** | ✅ |

---

### T-005: test プロトコルの設計

| 項目 | 内容 |
|------|------|
| **やること** | エージェントがテストを実行する際の協調プロトコルを設計する |
| **設計項目** | ① テスト実行のタイミング（commit 前 / commit 後 / マージ前） ② テスト範囲（変更ファイル関連のみ / 全体） ③ 並列テスト実行時の排他制御（テスト環境の共有問題） ④ テスト失敗時の振る舞い（自エージェントのみ停止 / 他エージェントにも通知） ⑤ 2段階テスト（fast/full）の採用可否 |
| **成果物** | `03_work_log.md` に設計結果を記録 |
| **完了条件** | 上記設計項目①〜⑤が定義されている |
| **優先度** | 🟡 |
| **ステータス** | ✅ |

---

### T-006: ガイドライン文書の作成

| 項目 | 内容 |
|------|------|
| **やること** | T-001〜T-005 の成果をもとに、`dev-process-improvement/docs/coordination-protocol-guideline.md` にガイドライン文書を作成する |
| **文書に含めるセクション** | ① 概要（本ガイドラインの目的・適用範囲） ② commit プロトコル ③ lock プロトコル ④ test プロトコル ⑤ 各プロトコルの相互関係 ⑥ 適用シナリオ（順次実行時 / 並列実行時） ⑦ git worktree ガイドラインとの関係 ⑧ 段階的導入の方針 |
| **成果物** | `dev-process-improvement/docs/coordination-protocol-guideline.md` |
| **完了条件** | 上記セクション①〜⑧を含むガイドライン文書が作成されている |
| **優先度** | 🔴 |
| **ステータス** | ✅ |

---

### T-007: 課題の確認と CSV 転記

| 項目 | 内容 |
|------|------|
| **やること** | `07_issues.md` の未転記課題を確認し、施策をまたぐ課題を `プロセス改善_課題管理.csv` へ転記する |
| **完了条件** | 全課題に `[転記済 ISS-XXX]` または「転記不要」の判断が付いている |
| **優先度** | 🔴 |
| **ステータス** | ✅ |

---

## フェーズ1 タスク（L2-evaluator 担当）

### T-008: プロトコル設計の評価

| 項目 | 内容 |
|------|------|
| **やること** | T-006 で作成されたガイドライン文書の品質・実用性を評価する |
| **評価観点** | ① 3つのプロトコルの網羅性（commit/lock/test それぞれに必要な項目が含まれているか） ② 実用性（実際のエージェント運用で適用可能か） ③ 整合性（プロトコル間・worktree ガイドラインとの矛盾がないか） ④ 段階的導入の妥当性（現在の順次実行と将来の並列実行の両方に対応できるか） ⑤ 文書の構成・可読性 |
| **成果物** | `05_eval_plan.md` および `06_eval_report.md` |
| **完了条件** | 評価観点①〜⑤について合否判定と改善提案が記載されている |
| **優先度** | 🔴 |
| **ステータス** | ✅ |

---

### T-009: 評価中の課題起票と CSV 転記

| 項目 | 内容 |
|------|------|
| **やること** | 評価中に新たに発見した課題を `07_issues.md` へ起票し、施策をまたぐ課題を `プロセス改善_課題管理.csv` へ転記する |
| **完了条件** | 全課題に `[転記済 ISS-XXX]` または「転記不要」の判断が付いている |
| **優先度** | 🔴 |
| **ステータス** | ✅ |

---

**作成者**: L1
**最終更新**: 2026-02-25
