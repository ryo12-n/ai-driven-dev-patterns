# 改善施策提案: OpenSpec標準ディレクトリ構成のルール化

## 背景・課題

本リポジトリでは OpenSpec を活用した spec-driven 開発が進んでいるが、ディレクトリ構成の標準的なあり方が明文化されていない。`openspec/config.yaml` にディレクトリの説明はあるものの、Claude が OpenSpec で開発する際に従うべきルールやフローが `.claude/rules/` として体系化されていない。

また、公式リポジトリ（Fission-AI/OpenSpec）のエッセンスが本リポジトリ内に保持されていないため、公式の設計意図を参照しながらルールを策定する土台が不足している。

## 目標

1. 公式リポジトリのエッセンスを `dev-process-improvement/refs/` にサマリーとして保持し、継続的に参照可能にする
2. OpenSpec ディレクトリ構成の標準ルールを `.claude/rules/` に新規作成し、Claude が開発時に自動参照できるようにする
3. 新規プロジェクトへの展開が容易になるガイドを整備する

## スコープ

### やること

- 公式リポジトリ（Fission-AI/OpenSpec）の調査・エッセンス抽出
- 抽出結果を `dev-process-improvement/refs/` にサマリーとして保持
- `.claude/rules/` に OpenSpec 開発ルール・フローのルールファイルを新規作成
- 既存の `openspec/config.yaml` との整合性を確認

### やらないこと

- `openspec/config.yaml` の大幅な書き換え（整合性確認のみ）
- 実コードへの OpenSpec 適用試験（別施策「openspec×実コード実装の試験運用」のスコープ）
- `/opsx:*` スラッシュコマンド群の改修

## 期待される効果

- Claude が OpenSpec で開発する際のルール・フローが明確になり、品質が安定する
- ディレクトリ構成の理解が促進され、新規プロジェクトへの展開が容易になる
- 公式リポジトリのエッセンスが手元に保持され、継続的に参照可能になる

## リスク

| リスク | 影響度 | 対策 |
|--------|--------|------|
| 公式リポジトリの構成が想定と大きく異なる | 中 | 調査フェーズで早期に把握し、スコープを調整する |
| 既存の config.yaml との矛盾が発生する | 低 | 整合性確認タスクで検出・解消する |

## 壁打ちの背景

フェーズ0 の壁打ちで以下が明確になった：

- **refs/ の配置先**: `dev-process-improvement/refs/` に配置する（施策成果物として管理）
- **ルールの配置先**: `.claude/rules/` 配下に新規ファイルとして作成する。Claude が OpenSpec で開発する際のルールやフローを整備する目的
- **エッセンス抽出の粒度**: 公式リポジトリの README 等からサマリーを抽出する形で十分（ファイル群をそのまま保持する必要はない）
- **ブランチ**: 指定ブランチ `claude/openspec-directory-structure-MZ5yx` を使用する

## 備考・設計パターン

本施策は調査→ルール策定の流れで進める。公式リポジトリの調査結果をもとに、本リポジトリの既存構成（`openspec/config.yaml`、`/opsx:*` コマンド群）との整合性を確認しながらルールを策定する。

---
**起票者**: L1
**起票日**: 2026-02-27
**ステータス**: 実施中
