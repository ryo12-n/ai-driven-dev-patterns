---
paths: "initiatives/**/00_proposal.md,initiatives/**/01_plan.md,initiatives/**/02_tasks.md,initiatives/**/08_gate_review.md"
---
# L1 マネージャーセッション ルール

## あなたの役割
あなたはL1（マネージャー）セッションです。開発プロセス改善の方針決定と管理を担当します。

## セッション開始時の入力解釈

セッション開始時にユーザーから以下2パターンの入力が来る。それぞれに応じて動作を決定する。

### パターン1: `backlog: <施策名>`

新施策を開始する。`backlog/<施策名>.md` の内容（課題・背景、期待効果、優先度）を参照し、下記「新施策の開始手順」に従い、`_template` のコピーから開始する。
施策ディレクトリの作成後、`backlog/<施策名>.md` を `git rm` で削除する（内容は `00_proposal.md` に引き継がれるため、バックログファイルは不要になる）。

### パターン2: `施策: <パス>`

指定フォルダの状態を確認し、以下の3分岐で動作を決定する。

| フォルダの状態 | 動作 |
|-------------|------|
| `00_proposal.md` が存在しない | 提案・計画作成から開始（パターン1と同様の手順） |
| `00_proposal.md`〜`02_tasks.md` が存在、`03_work_log.md` 以降がない | L2-worker 起動モード（下記「L2サブエージェントの起動・オーケストレーション」に従い起動） |
| `04_work_report.md`・`06_eval_report.md` が揃っている | ゲート判定モード（`08_gate_review.md` を作成） |

> 判断根拠は `03_work_log.md`（存在する場合は末尾）に記録すること。

---

## 新施策の開始手順

新しい施策を開始する際は、必ず以下の順で行う。

1. `initiatives/_template/` を `initiatives/<施策名>/` にコピーする
2. コピー先の各ファイルをフェーズAの順で作成する

## 担当フェーズと成果物

### フェーズ0: 壁打ちフェーズ（フェーズA 開始前）

`00_proposal.md` を作成する前に、CLAUDE.md の壁打ちルールに従い以下を確認・提示する。

1. **理解のサマリー** — 施策の目的・スコープ・完了条件を自分の言葉でまとめる
2. **不明点の列挙** — 方針や判断が必要な選択肢を箇条書きで確認する
3. **ブランチ作成の確認** — 施策用ブランチ名（`initiative/<施策名の英語>`）をユーザーに提案し、作成の承認を得る。承認後、`main` から新ブランチを作成する。

壁打ちで得られた意思決定の背景は `00_proposal.md` の「## 壁打ちの背景」セクションに記録する。

### フェーズA: 調査・方針決定・計画作成・タスク作成
1. `00_proposal.md` — 改善施策の提案（背景・課題・目標・スコープ・壁打ち背景）
2. `01_plan.md` — 実施計画（フェーズ分け・スケジュール・成功基準・リスク）
3. `02_tasks.md` — L2に渡すタスクリスト（チェックボックス形式）

### フェーズB: レビュー・ゲート判定・計画修正
4. `08_gate_review.md` — L2のレポートを受けてのゲート判定

## やること

- `00_proposal.md`・`01_plan.md`・`02_tasks.md` を作成して施策を立ち上げる
- L2サブエージェント（worker / evaluator）を順番に起動してタスクを委任する
- L2の成果物を読んで品質を確認し、必要に応じて差し戻しを判断する
- `08_gate_review.md` でゲート判定（通過 / 条件付き通過 / 差し戻し）を行う
- 施策完了後にアーカイブ処理を行う

## やらないこと

- L2 の成果物（`03_work_log.md`、`04_work_report.md`、`05_eval_plan.md`、`06_eval_report.md`、`07_issues.md`）は直接編集しない（読み取りのみ）
- 曖昧なタスク指示を出さない（「適切に対応」等は禁止。具体的なアクションと完了条件を明記する）
- L2 の実行中に人間の承認を求めない（判断は L1 が自律的に行い、`08_gate_review.md` に記録する）

## ルール

- ゲート判定は必ず「通過 / 条件付き通過 / 差し戻し」の3択で判定する。判定理由を必ず記載する。

## L2への指示の出し方
- `02_tasks.md` にタスクを書く。L2はこのファイルを読んで作業する。
- タスクには以下を含める:
  - タスクID（T-001形式）
  - やること（具体的なアクション）
  - 完了条件（何をもって完了とするか）
  - 優先度（高/中/低）

### タスクリストに含める固定タスク

`02_tasks.md` を作成する際は、以下のタスクを**必ず**含めること。

**実施ワーカー（l2-worker）向け**（最後のタスクとして追加）:
- やること: `07_issues.md` の未転記課題を確認し、施策をまたぐ課題を `プロセス改善_課題管理.csv` へ転記する
- 完了条件: 全課題に `[転記済 ISS-XXX]` または「転記不要」の判断が付いている
- 優先度: 高（`08_gate_review.md` 作成前に完了すること）

**評価ワーカー（l2-evaluator）向け**（最後のタスクとして追加）:
- やること: 評価中に新たに発見した課題を `07_issues.md` へ起票し、施策をまたぐ課題を `プロセス改善_課題管理.csv` へ転記する
- 完了条件: 全課題に `[転記済 ISS-XXX]` または「転記不要」の判断が付いている
- 優先度: 高（評価レポート提出前に完了すること）

## L2サブエージェントの起動・オーケストレーション

L2はサブエージェント（Taskツール）として順番に起動する。
L2-workerが完了してからL2-evaluatorを起動すること（並列起動しない）。

### 起動時に渡す観点

L2を起動する際は、以下の観点を含めた指示を与えること（詳細な表現はその都度判断する）：

- **役割とルール**: どのルールファイル（l2-worker.md / l2-evaluator.md）に従うか
- **施策の場所**: 対象の `initiatives/<施策名>/` パス
- **スコープ**: 今回のフェーズで扱うタスク範囲（全タスクか特定タスクIDか）
- **完了の定義**: 何をもってサブエージェントの終了とするか

### L2成果物の確認観点（evaluator起動前）

L2-workerの成果物を読む際に確認すべき観点：

- `02_tasks.md` のタスクが完了・スキップ・ブロックのいずれかに分類されているか
- `04_work_report.md` に計画対比の実績が記載されているか
- `07_issues.md` に起票された課題の重大度（次フェーズを止めるレベルか）
- `07_issues.md` の課題に `[転記済 ISS-XXX]` が付いているか（CSV転記が完了しているか）

成果物の品質が不十分と判断した場合は、evaluatorを起動せずに差し戻しを検討する。

### L2 壁打ちフェーズへの応答フロー

L2（worker / evaluator ともに）は作業開始前に壁打ちフェーズを実施し、不明点がある場合は停止して L1 の確認を待つ。
L1 は以下の手順で応答する。

1. L2 が停止したら壁打ちフェーズの記録ファイルを読む
   - L2-worker: `03_work_log.md` の「壁打ちフェーズ」セクション
   - L2-evaluator: `05_eval_plan.md` の「壁打ちフェーズ」セクション
2. 不明点に対して回答を用意し、L2 を resume して回答を伝える
3. 不明点が軽微な場合は L2 に判断を委ねてよい（resume 時に「〜の判断はL2に委任」と明示する）

不明点がなく L2 が自走している場合は介入不要。

### 実施ワーカー未転記への対応フロー

評価レポート（`06_eval_report.md`）に実施ワーカーの未転記課題が記載されている場合、以下の手順で対応する。

1. **L2-worker を resume して転記を指示する**
   - L2-worker 起動時に返ってきた agent_id を使い、`resume` で再依頼する
   - コンテキストが保持されているため、`07_issues.md` の課題内容を把握した状態で転記できる

2. **コンテキストが保持されていない場合はL1が代理転記する**
   - agent_id が消失している、またはセッションが期限切れで resume 不可の場合
   - resume したが前回作業の内容を正確に把握できていない応答が返ってきた場合
   - L1が `07_issues.md` を直接読み、`プロセス改善_課題管理.csv` へ転記する

### 人間へのチェックポイント

唯一の人間チェックポイントは **ゲート判定（08_gate_review.md）** のみ。
L2起動中に人間の承認を求めない。判断が必要な事項はL1が自律的に決定し、判断内容を08に記録する。

---

## initiative クローズ手順

`08_gate_review.md` で「通過」判定（施策完了）が出た後、以下のチェックリストを順に実施する。

### クローズチェックリスト

1. **横展開セクションの記載確認**: `08_gate_review.md` の「横展開・次施策への引き継ぎ事項」セクションが記載されていることを確認する。必須把握事項・次施策候補ともに空欄でないこと（該当なしの場合は「なし」と明記されていること）
2. **課題転記の完了確認**: `07_issues.md` の全課題に `[転記済 ISS-XXX]` または「転記不要」の判断が付いていることを確認する
3. **次施策候補のCSV転記確認**: `08_gate_review.md` の「次施策候補への提案」に記載がある場合、`プロセス改善_課題管理.csv` へ転記されていることを確認する
4. **バックログファイルの削除確認**: 施策開始時に `backlog/<施策名>.md` が削除されていることを確認する（パターン1 のルールに従い施策開始時に削除済みのはず）
5. **アーカイブ移動**: 施策ディレクトリを `_archive/` に移動する

```bash
git mv initiatives/<施策名>/ initiatives/_archive/<施策名>/
```

6. 移動後、コミットしてクローズ完了とする

> **施策ブランチの運用**: 施策中は `initiative/<施策名の英語>` ブランチで作業し、都度 push する。`main` へのマージタイミングはユーザーの判断に委ねる。

> チェックリスト1〜4 に不備がある場合は、不備を修正してからアーカイブ移動を行う。
