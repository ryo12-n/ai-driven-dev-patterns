# セッション横断の作業規律設計

## メタ情報

| 項目 | 内容 |
|------|------|
| **優先度** | 🟡 中 |
| **ステータス** | 候補 |
| **起票日** | 2026-03-01 |

## 課題・背景

施策「シナリオ別セッション運用フロー設計」で5シナリオのセッション運用フローを設計したが、**セッション横断の作業規律**（壁打ち・実施計画・作業ログ・作業レポート・課題起票）が実行層に未導入。

### 現状のギャップ

| レイヤー | 作業規律 | 問題 |
|---------|---------|------|
| 戦略層（dev-process-improvement 施策管理） | 完全（00-08 ファイル、L1/L2 分担） | なし |
| 実行層（5シナリオの開発セッション） | **なし**（git commit のみ） | コンテキスト切れ時の復旧困難、セッション間のトレーサビリティ不在 |

### 方針

1. **一律セッション管理**: 全セッションで `sessions/<session-name>/` ディレクトリを作成し、作業履歴を記録する。複雑度による判定分岐は行わない

2. **openspec/ と sessions/ の完全分離**:
   - `openspec/` 配下には OpenSpec 標準の成果物（proposal / specs / design / tasks）のみ配置
   - `sessions/<session-name>/` 配下に作業履歴を記録
   - セッションの作業履歴（log.md 等）から、対応する openspec 成果物をパスで参照する

3. **セッション管理ファイル**: 4ファイル構成
   - **plan.md** — 壁打ち（必須セクション: 不明点の洗い出しと解消）+ 実施計画
   - **log.md** — 作業ログ（openspec 成果物への参照を含む）
   - **report.md** — 完了レポート
   - **issues.md** — 課題バッファ

## 期待効果

- 全セッションに一律の作業規律が適用され、品質トレーサビリティが向上
- 判定ロジック不要でディスパッチャーがシンプルに保たれる
- コンテキスト切れ時のセッション復旧が容易になる（壁打ち・計画・ログが残る）
- openspec/ と sessions/ の責務が明確に分離され、それぞれの構造が単純になる

## 補足・参考情報

### 依存関係

| 施策 | 関係 | 理由 |
|------|------|------|
| **セッション運用フロー設計書の分割** | **分割が先** | §11（横断的関心事）への追記は分割後の `session-flow-advanced.md` に対して行うため |
| コード開発ワークフロー・ロール定義の実装（ISS-023） | 本施策が先が望ましい | ロール定義にセッション規律（sessions/ ディレクトリ）を組み込む際に連携 |

### 参考情報

- **前提施策**: シナリオ別セッション運用フロー設計（完了）→ `docs/design/session-operation-flow.md`
- **壁打ちログ**: プランファイル `parsed-dancing-wolf.md` に設計分析と方針修正の経緯を記録

### 想定される設計対象

1. セッションディレクトリのテンプレート設計（plan.md / log.md / report.md / issues.md）
2. sessions/ から openspec/ 成果物への参照方式の設計
3. session-operation-flow.md §11 への追記（横断的関心事として）

### 想定ディレクトリ構成

```
# 全セッション共通
sessions/<session-name>/
├── plan.md         # 壁打ち（必須セクション）+ 実施計画
├── log.md          # 作業ログ（openspec 成果物への参照を含む）
├── report.md       # 完了レポート
└── issues.md       # 課題バッファ

# OpenSpec 成果物（sessions とは独立）
openspec/
├── specs/          # 現行仕様（Single Source of Truth）
└── changes/        # 変更サイクル（OpenSpec 標準構造のみ）
```
