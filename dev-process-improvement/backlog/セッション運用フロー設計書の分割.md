# セッション運用フロー設計書の分割

## メタ情報

| 項目 | 内容 |
|------|------|
| **優先度** | 🟡 中 |
| **ステータス** | 候補 |
| **起票日** | 2026-03-01 |

## 課題・背景

施策「シナリオ別セッション運用フロー設計」で作成した `docs/design/session-operation-flow.md` が **1,647行** と長大。将来的に `.claude/` 配下のルールファイル・スキルとして実装する予定だが、1ファイルのままではマッピングが困難。

### 現在の設計ドキュメント群

| ファイル | 行数 | 状態 |
|---------|------|------|
| `dev-workflow-overview.md` | 242 | 適正 |
| `dev-workflow-detail.md` | 765 | 許容範囲 |
| `session-operation-flow.md` | 1,647 | **分割推奨** |

### 自然な分割ポイント

| グループ | セクション | 行数 | 内容 |
|---------|-----------|------|------|
| **基盤** | §1-4 | ~360 | 概要、ライフサイクルモデル、ディスパッチャー/ルーター、人間エントリーポイント |
| **シナリオ** | §5-9 | ~649 | 5シナリオの詳細フロー（各シナリオ独立度 75-90%） |
| **横断・統合** | §10-13 | ~538 | ハイブリッドレビュー、横断的関心事、デザインデルタ、まとめ |

### `.claude/` 実装との対応関係

| 設計グループ | → 将来の実装先 |
|------------|-------------|
| 基盤（ライフサイクル・ディスパッチャー） | `.claude/rules/` のセッション管理ルール、CLAUDE.md |
| シナリオ別フロー | `.claude/skills/` の各シナリオ用スキル |
| 横断的関心事 | `.claude/rules/` の共通ルール、`roles/_base/common.md` |

## 期待効果

- 各ファイルが **350-650行** に収まり、読了・レビュー・メンテナンスのコストが低下
- `.claude/` 実装時の設計→実装マッピングが 1:1 で明確になる
- 変更影響範囲が限定され、PR レビューが容易に

## 補足・参考情報

### 分割案

```
docs/design/
├── session-operation-flow.md           → 概要 + 各ドキュメントへのリンク（ハブ）
├── session-flow-foundations.md         → §1-4（基盤）~360行
├── session-flow-scenarios.md           → §5-9（シナリオ）~649行
└── session-flow-advanced.md            → §10-13（横断・統合）~538行
```

### 作業内容

1. §1-4 を `session-flow-foundations.md` に切り出し
2. §5-9 を `session-flow-scenarios.md` に切り出し
3. §10-13 を `session-flow-advanced.md` に切り出し
4. 元の `session-operation-flow.md` をハブドキュメント化（概要 + 各ファイルへのリンク）
5. 既存ドキュメント（overview, detail）のデザインデルタ表の参照パスを更新
6. 施策管理ファイル内の参照パスを更新

### 依存関係

| 施策 | 関係 | 理由 |
|------|------|------|
| **セッション横断の作業規律設計** | **本施策が先** | §11（横断的関心事）への追記は分割後の advanced ファイルに対して行うため、分割完了が前提 |
| コード開発ワークフロー・ロール定義の実装（ISS-023） | 本施策が先が望ましい | ロール定義実装時に分割後のドキュメントを参照する方が効率的 |
