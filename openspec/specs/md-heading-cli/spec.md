# md-heading-cli Specification

## Purpose
マークダウンファイルの見出し一覧を出力する Go CLI ツールの仕様。
ATX 形式の見出し（`#` プレフィックス）を解析し、インデント付きの階層形式で標準出力に表示する。

## Requirements

### Requirement: CLI 引数によるファイル指定
ユーザーはコマンドライン引数としてマークダウンファイルのパスを指定しなければならない（MUST）。

#### Scenario: 正常なファイル指定
- **GIVEN** 有効なマークダウンファイルが存在する
- **WHEN** ユーザーがそのファイルパスを引数として CLI を実行する
- **THEN** CLI はそのファイルを読み込み、見出し一覧を出力しなければならない（MUST）

#### Scenario: 引数なしでの実行
- **GIVEN** CLI が引数なしで実行される
- **WHEN** プログラムが起動する
- **THEN** 使い方（usage）メッセージを標準エラー出力に表示し、終了コード 1 で終了しなければならない（MUST）

#### Scenario: 存在しないファイルの指定
- **GIVEN** 指定されたパスにファイルが存在しない
- **WHEN** ユーザーがそのパスを引数として CLI を実行する
- **THEN** エラーメッセージを標準エラー出力に表示し、終了コード 1 で終了しなければならない（MUST）

### Requirement: マークダウン見出しの解析
CLI はマークダウンファイルの ATX 形式の見出し（`#` で始まる行）を解析しなければならない（MUST）。

#### Scenario: 複数レベルの見出しの解析
- **GIVEN** マークダウンファイルに `#`（h1）から `######`（h6）までの見出しが含まれる
- **WHEN** CLI がそのファイルを解析する
- **THEN** すべてのレベルの見出しを検出し、レベルと見出しテキストを保持しなければならない（MUST）

#### Scenario: 見出し以外の行の除外
- **GIVEN** マークダウンファイルに本文テキスト、コードブロック、リスト等が含まれる
- **WHEN** CLI がそのファイルを解析する
- **THEN** `#` で始まる見出し行のみを抽出し、それ以外の行は無視しなければならない（MUST）

#### Scenario: コードブロック内の # の除外
- **GIVEN** マークダウンファイルのコードブロック（``` で囲まれた領域）内に `#` で始まる行が含まれる
- **WHEN** CLI がそのファイルを解析する
- **THEN** コードブロック内の `#` 行は見出しとして扱ってはならない（MUST NOT）

### Requirement: 見出し一覧の出力形式
CLI は解析した見出しをインデント付きの階層形式で標準出力に表示しなければならない（MUST）。

#### Scenario: インデント付き出力
- **GIVEN** マークダウンファイルに異なるレベルの見出しが含まれる
- **WHEN** CLI が見出し一覧を出力する
- **THEN** 見出しレベルに応じてインデント（レベル1 はインデントなし、レベル2 は 2 スペース、レベル N は (N-1)*2 スペース）を付けて出力しなければならない（MUST）

#### Scenario: 見出しが存在しないファイル
- **GIVEN** マークダウンファイルに見出しが1つも含まれない
- **WHEN** CLI がそのファイルを解析する
- **THEN** 何も出力せず、終了コード 0 で正常終了しなければならない（SHALL）
